<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizVocab | Professional English</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; }

        /* Smooth Animations for Background */
        @keyframes float {
            0% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-20px) translateX(10px); }
            100% { transform: translateY(0px) translateX(0px); }
        }
        @keyframes float-reverse {
            0% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(20px) translateX(-10px); }
            100% { transform: translateY(0px) translateX(0px); }
        }

        .blob {
            position: fixed;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
        }
        .blob-1 { top: -10%; left: -10%; width: 500px; height: 500px; background: #4F46E5; animation: float 8s infinite ease-in-out; }
        .blob-2 { bottom: -10%; right: -10%; width: 600px; height: 600px; background: #06B6D4; animation: float-reverse 10s infinite ease-in-out; }
        .blob-3 { top: 40%; left: 40%; width: 400px; height: 400px; background: #8B5CF6; animation: float 12s infinite ease-in-out; }

        /* Glassmorphism Cards */
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .dark .glass-panel {
            background: rgba(17, 24, 39, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Interactive Elements */
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover { transform: translateY(-2px); }
        .option-btn.selected { border-color: #4F46E5; background-color: #EEF2FF; color: #4F46E5; }
        
        .correct-answer { background-color: #D1FAE5 !important; border-color: #10B981 !important; color: #065F46 !important; }
        .wrong-answer { background-color: #FEE2E2 !important; border-color: #EF4444 !important; color: #991B1B !important; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen relative overflow-x-hidden transition-colors duration-300">

    <!-- Animated Background -->
    <div class="blob blob-1 rounded-full"></div>
    <div class="blob blob-2 rounded-full"></div>
    <div class="blob blob-3 rounded-full"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center cursor-pointer" onclick="renderView('home')">
                    <i class="fas fa-briefcase text-indigo-600 text-2xl mr-2"></i>
                    <span class="font-bold text-xl tracking-tight text-slate-900">BizVocab</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="renderView('home')" class="hover:bg-indigo-100 text-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">Home</button>
                        <button onclick="renderView('modules')" class="hover:bg-indigo-100 text-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">Modules</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main id="app-container" class="pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto relative z-10">
        <!-- Content injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-slate-500 text-sm relative z-10">
        <p>Â© 2024 Business English Hub. Based on Cambridge Professional English materials.</p>
    </footer>

    <script>
        // DATA STORE: Based on Business Vocabulary in Use (Mascull)
        const modules = [
            {
                id: 1,
                title: "Work and Jobs",
                icon: "fa-id-card",
                summary: "Discussing responsibilities, job titles, and hierarchies.",
                learning: {
                    intro: "When asking about someone's job, we say 'What do you do?'. We use specific prepositions to describe our role (work for, in charge of, responsible for).",
                    keyTerms: [
                        { term: "to work for", def: "Used with a company or person (e.g., 'I work for Google')." },
                        { term: "to work in", def: "Used with a place or department (e.g., 'I work in marketing')." },
                        { term: "to be in charge of", def: "To have control over something/someone." },
                        { term: "to deal with", def: "To handle tasks, people, or problems." },
                        { term: "responsible for", def: "Having the duty to look after something." },
                        { term: "off work", def: "Absent temporarily (illness, holiday)." },
                        { term: "out of work", def: "Unemployed; having no job." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "1.1 Match the verbs (1-5) with the correct prepositions (A-E).",
                        questions: [
                            { q: "1. to work", options: ["for / in / with", "of", "about"], answer: 0 },
                            { q: "2. to be responsible", options: ["with", "for", "of"], answer: 1 },
                            { q: "3. to be in charge", options: ["to", "for", "of"], answer: 2 },
                            { q: "4. to deal", options: ["with", "for", "at"], answer: 0 },
                            { q: "5. to work (as)", options: ["a [job title]", "a [company]", "a [place]"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "1.2 Complete the sentences with the correct preposition (in, for, of, with).",
                        questions: [
                            { text: "I work ___ a large European car maker.", answer: "for" },
                            { text: "I work ___ a factory in Birmingham.", answer: "in" },
                            { text: "I am responsible ___ production planning.", answer: "for" },
                            { text: "I am in charge ___ a team of three people.", answer: "of" },
                            { text: "I deal ___ a lot of different people in the company.", answer: "with" },
                            { text: "I deal ___ the factory manager every day.", answer: "with" }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "1.3 Complete the paragraph about Pierre's job.",
                        questions: [
                            { text: "Hi, I'm Pierre. I am a manager. I work ___ a large supermarket chain.", answer: "for" },
                            { text: "I work ___ the export department.", answer: "in" },
                            { text: "I am responsible ___ finding new suppliers.", answer: "for" },
                            { text: "I deal ___ suppliers in Italy and Spain.", answer: "with" },
                            { text: "I am also in charge ___ quality control.", answer: "of" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "1.4 Match the job description to the definition.",
                        questions: [
                            { q: "I have a full-time job.", options: ["I work the whole working week.", "I only work a few hours.", "I don't have a job."], answer: 0 },
                            { q: "I have a part-time job.", options: ["I work 40 hours a week.", "I work less than the whole week.", "I work at night."], answer: 1 },
                            { q: "I have a permanent job.", options: ["It finishes after 6 months.", "It does not finish after a fixed period.", "I am self-employed."], answer: 1 },
                            { q: "I have a temporary job.", options: ["I work for an agency.", "It finishes after a short, fixed period.", "I am the boss."], answer: 1 }
                        ]
                    }
                ],
                test: [
                    { q: "Choose the correct preposition: 'I am responsible ___ marketing.'", options: ["of", "for", "to", "with"], answer: 1 },
                    { q: "Choose the correct preposition: 'I am in charge ___ the sales team.'", options: ["for", "with", "of", "in"], answer: 2 },
                    { q: "Which is correct?", options: ["I'm a responsible.", "I'm responsible.", "I'm responser."], answer: 1 },
                    { q: "Complete: 'My work involves ___ to customers.'", options: ["talking", "talk", "to talk", "talked"], answer: 0 },
                    { q: "If you have no job, you are:", options: ["Off work", "Out of work", "Away from work", "In work"], answer: 1 },
                    { q: "If you are ill and cannot go to the office, you are:", options: ["Out of work", "Off work", "Left work", "Stopped work"], answer: 1 },
                    { q: "I work ___ a journalist.", options: ["as", "like", "for", "in"], answer: 0 },
                    { q: "Which describes a '9 to 5' job?", options: ["Shift work", "Flexitime", "Regular office hours", "Teleworking"], answer: 2 },
                    { q: "I ___ with customer complaints.", options: ["manage", "deal", "organize", "control"], answer: 1 },
                    { q: "A job that finishes after 3 months is:", options: ["Permanent", "Full-time", "Temporary", "Consultant"], answer: 2 }
                ]
            },
            {
                id: 2,
                title: "Ways of Working",
                icon: "fa-clock",
                summary: "Office routines, flexible hours, and teleworking.",
                learning: {
                    intro: "The traditional '9-to-5' is changing. We now talk about flexitime, shifts, and teleworking.",
                    keyTerms: [
                        { term: "Flexitime", def: "A system where you can choose when you start and finish work." },
                        { term: "Shift work", def: "Working at different times of the day or night (e.g., night shift)." },
                        { term: "Teleworking", def: "Working from home using a computer/internet." },
                        { term: "Commute", def: "The daily journey to and from work." },
                        { term: "Clock in/on", def: "To record the time you arrive at work." }
                    ]
                },
                exercises: [
                    {
                        type: "gapfill",
                        instruction: "Complete the text with words from the unit.",
                        questions: [
                            { text: "I hate the daily ___ to London; the trains are crowded.", answer: "commute" },
                            { text: "We have ___ system, so I can start at 10am if I want.", answer: "flexitime" },
                            { text: "Nurses often have to work the night ___.", answer: "shift" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "Choose the adjective that fits the description.",
                        questions: [
                            { q: "The work involves doing the same thing again and again.", options: ["Stimulating", "Repetitive", "Fascinating"], answer: 1 },
                            { q: "The work is difficult and makes you tired.", options: ["Tough", "Routine", "Boring"], answer: 0 },
                            { q: "The work gives you positive feelings.", options: ["Satisfying", "Dull", "Uninteresting"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "I work ___ home two days a week.", options: ["from", "at", "in"], answer: 0 },
                    { q: "He has to ___ in at 8:00 AM exactly.", options: ["watch", "time", "clock"], answer: 2 },
                    { q: "Working from home is also called:", options: ["Telecommuting", "Shift working", "Flexi-working"], answer: 0 },
                    { q: "My job is ___; it's very interesting.", options: ["boring", "stimulating", "repetitive"], answer: 1 },
                    { q: "I have a ___ job (9am to 5pm).", options: ["nine-to-five", "full-day", "all-time"], answer: 0 }
                ]
            }
            // TO ADD MORE MODULES: Copy the structure above and change ID/Content based on the PDF.
        ];

        // APP STATE
        let currentView = 'home';
        let currentModuleId = null;

        // INIT
        document.addEventListener('DOMContentLoaded', () => {
            renderView('home');
        });

        // VIEW CONTROLLER
        function renderView(viewName, moduleId = null) {
            const app = document.getElementById('app-container');
            app.innerHTML = ''; // Clear content
            app.style.opacity = 0; // Fade out effect

            setTimeout(() => {
                if (viewName === 'home') renderHome(app);
                else if (viewName === 'modules') renderModules(app);
                else if (viewName === 'module-detail') renderModuleDetail(app, moduleId);
                else if (viewName === 'test') renderTest(app, moduleId);
                
                app.style.transition = 'opacity 0.5s ease';
                app.style.opacity = 1;
            }, 200);
        }

        // RENDERERS
        function renderHome(container) {
            container.innerHTML = `
                <div class="text-center py-16">
                    <h1 class="text-5xl md:text-6xl font-bold text-slate-900 mb-6 tracking-tight">
                        Master Business <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-cyan-500">English</span>
                    </h1>
                    <p class="text-xl text-slate-600 mb-10 max-w-2xl mx-auto">
                        Enhance your workplace vocabulary with interactive modules designed for B2 professionals. 
                        Based on the Cambridge Business Vocabulary curriculum.
                    </p>
                    <button onclick="renderView('modules')" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-full shadow-lg transform transition hover:scale-105">
                        Start Learning <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                    <div class="glass-panel p-6 rounded-xl shadow-sm text-center">
                        <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600">
                            <i class="fas fa-book-open text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Detailed Theory</h3>
                        <p class="text-slate-600">Learn definitions, collocations, and grammar rules for the workplace.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-xl shadow-sm text-center">
                        <div class="w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4 text-cyan-600">
                            <i class="fas fa-laptop-code text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Interactive Practice</h3>
                        <p class="text-slate-600">Gap fills and matching exercises to reinforce your learning.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-xl shadow-sm text-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-600">
                            <i class="fas fa-chart-line text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Module Tests</h3>
                        <p class="text-slate-600">Test your knowledge at the end of each module to track progress.</p>
                    </div>
                </div>
            `;
        }

        function renderModules(container) {
            let html = `
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">Learning Modules</h2>
                    <p class="text-slate-600">Select a topic to begin studying.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            `;

            modules.forEach(mod => {
                html += `
                    <div class="glass-panel rounded-xl p-6 hover:shadow-md transition cursor-pointer group" onclick="renderView('module-detail', ${mod.id})">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-xs font-bold uppercase text-indigo-500 tracking-wider">Module ${mod.id}</span>
                            <i class="fas ${mod.icon} text-slate-400 group-hover:text-indigo-600 transition"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition">${mod.title}</h3>
                        <p class="text-slate-600 text-sm mb-4">${mod.summary}</p>
                        <div class="w-full bg-slate-200 rounded-full h-1.5 mt-2">
                            <div class="bg-indigo-500 h-1.5 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function renderModuleDetail(container, id) {
            const mod = modules.find(m => m.id === id);
            
            let html = `
                <button onclick="renderView('modules')" class="mb-6 text-slate-500 hover:text-indigo-600 transition">
                    <i class="fas fa-arrow-left mr-1"></i> Back to Modules
                </button>
                
                <div class="glass-panel rounded-2xl p-8 mb-8 border-l-4 border-indigo-500">
                    <h1 class="text-3xl font-bold text-slate-900 mb-2">Unit ${mod.id}: ${mod.title}</h1>
                    <p class="text-lg text-slate-600">${mod.learning.intro}</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Theory Section -->
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-xl shadow-sm p-6 sticky top-24">
                            <h3 class="text-xl font-bold text-slate-800 mb-4 border-b pb-2">Key Vocabulary</h3>
                            <ul class="space-y-4">
                                ${mod.learning.keyTerms.map(term => `
                                    <li>
                                        <span class="block font-bold text-indigo-600">${term.term}</span>
                                        <span class="text-sm text-slate-600">${term.def}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>

                    <!-- Exercises Section -->
                    <div class="lg:col-span-2 space-y-8">
                        ${mod.exercises.map((ex, index) => renderExercise(ex, index)).join('')}
                        
                        <div class="glass-panel p-8 rounded-xl text-center mt-10">
                            <h3 class="text-2xl font-bold mb-4">Ready to test yourself?</h3>
                            <button onclick="renderView('test', ${mod.id})" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">
                                Take Module Test
                            </button>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function renderExercise(ex, index) {
            let content = '';
            
            if (ex.type === 'gapfill') {
                content = `<div class="space-y-4">`;
                ex.questions.forEach((q, qIdx) => {
                    const parts = q.text.split('___');
                    content += `
                        <div class="flex items-baseline flex-wrap gap-2 text-lg">
                            <span>${qIdx + 1}. ${parts[0]}</span>
                            <input type="text" data-ans="${q.answer}" class="gap-input bg-white border border-slate-300 rounded px-2 py-1 focus:ring-2 focus:ring-indigo-500 outline-none w-32 text-center font-bold text-indigo-600" placeholder="?">
                            <span>${parts[1] || ''}</span>
                            <span class="feedback-icon hidden ml-2"></span>
                        </div>
                    `;
                });
                content += `</div>`;
            } else if (ex.type === 'match') {
                content = `<div class="space-y-6">`;
                ex.questions.forEach((q, qIdx) => {
                    content += `
                        <div class="bg-white p-4 rounded-lg border border-slate-100">
                            <p class="font-medium mb-3">${qIdx + 1}. ${q.q}</p>
                            <div class="flex flex-wrap gap-2">
                                ${q.options.map((opt, oIdx) => `
                                    <button onclick="selectOption(this, ${q.answer === oIdx})" class="option-btn border border-slate-300 px-4 py-2 rounded-full text-sm hover:bg-slate-50 transition">
                                        ${opt}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    `;
                });
                content += `</div>`;
            }

            return `
                <div class="glass-panel p-6 rounded-xl">
                    <div class="flex items-center mb-4">
                        <span class="bg-indigo-100 text-indigo-700 text-xs font-bold px-2 py-1 rounded uppercase mr-2">Activity ${index + 1}</span>
                        <h4 class="font-bold text-slate-800">${ex.instruction}</h4>
                    </div>
                    ${content}
                    ${ex.type === 'gapfill' ? `<button onclick="checkGapFill(this)" class="mt-4 text-sm bg-slate-800 text-white px-4 py-2 rounded hover:bg-slate-700 transition">Check Answers</button>` : ''}
                </div>
            `;
        }

        function renderTest(container, id) {
            const mod = modules.find(m => m.id === id);
            
            let html = `
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-10">
                        <span class="text-indigo-600 font-bold tracking-wider uppercase text-sm">Assessment</span>
                        <h2 class="text-3xl font-bold text-slate-900 mt-2">Test: ${mod.title}</h2>
                    </div>

                    <div class="space-y-6" id="test-form">
                        ${mod.test.map((q, idx) => `
                            <div class="glass-panel p-6 rounded-xl test-question" data-correct="${q.answer}">
                                <p class="text-lg font-medium mb-4"><span class="text-slate-400 mr-2">${idx + 1}.</span>${q.q.replace('___', '______')}</p>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                    ${q.options.map((opt, oIdx) => `
                                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-indigo-50 transition border-slate-200">
                                            <input type="radio" name="q${idx}" value="${oIdx}" class="text-indigo-600 focus:ring-indigo-500 h-4 w-4">
                                            <span class="ml-3 text-slate-700">${opt}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="mt-10 text-center pb-20">
                        <button onclick="submitTest()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-10 rounded-full shadow-lg transform transition hover:scale-105 text-lg">
                            Submit Answers
                        </button>
                        <button onclick="renderView('module-detail', ${id})" class="ml-4 text-slate-500 underline">Cancel</button>
                    </div>
                </div>

                <!-- Result Modal Overlay -->
                <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center px-4">
                    <div class="bg-white rounded-2xl p-8 max-w-md w-full text-center shadow-2xl transform scale-90 opacity-0 transition-all duration-300" id="result-content">
                        <div id="score-icon" class="text-6xl mb-4"></div>
                        <h3 class="text-2xl font-bold mb-2">Test Complete!</h3>
                        <p class="text-slate-600 mb-6">You scored <span id="score-val" class="font-bold text-2xl text-indigo-600"></span> out of <span id="score-total"></span></p>
                        <div class="flex justify-center space-x-4">
                            <button onclick="renderView('module-detail', ${id}); closeModal()" class="px-4 py-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50">Review Unit</button>
                            <button onclick="renderView('modules'); closeModal()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Next Module</button>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        // INTERACTION LOGIC

        // For Multiple Choice Practice
        window.selectOption = function(btn, isCorrect) {
            // Reset siblings
            const parent = btn.parentElement;
            const buttons = parent.querySelectorAll('button');
            buttons.forEach(b => {
                b.classList.remove('correct-answer', 'wrong-answer');
                b.disabled = true; // Disable after selection
            });

            if (isCorrect) {
                btn.classList.add('correct-answer');
                btn.innerHTML += ' <i class="fas fa-check ml-2"></i>';
            } else {
                btn.classList.add('wrong-answer');
                btn.innerHTML += ' <i class="fas fa-times ml-2"></i>';
                // Highlight correct one
                // In a real app we'd pass the index, but here we just show feedback
            }
        };

        // For Gap Fill
        window.checkGapFill = function(btn) {
            const container = btn.parentElement;
            const inputs = container.querySelectorAll('input');
            let allCorrect = true;

            inputs.forEach(input => {
                const userAns = input.value.trim().toLowerCase();
                const correctAns = input.dataset.ans.toLowerCase();
                const icon = input.nextElementSibling.nextElementSibling; // span.feedback-icon

                icon.classList.remove('hidden');
                if (userAns === correctAns) {
                    input.classList.add('border-green-500', 'text-green-600');
                    input.classList.remove('border-red-500', 'text-red-600');
                    icon.innerHTML = '<i class="fas fa-check text-green-500"></i>';
                } else {
                    input.classList.add('border-red-500', 'text-red-600');
                    input.classList.remove('border-green-500', 'text-green-600');
                    icon.innerHTML = `<i class="fas fa-times text-red-500"></i> <span class="text-xs text-red-500 ml-1">${correctAns}</span>`;
                    allCorrect = false;
                }
            });

            if (allCorrect) {
                btn.textContent = "Great Job!";
                btn.className = "mt-4 text-sm bg-green-600 text-white px-4 py-2 rounded";
            } else {
                btn.textContent = "Try Again / See Corrections";
            }
        };

        // For Test Submission
        window.submitTest = function() {
            const questions = document.querySelectorAll('.test-question');
            let score = 0;
            let total = questions.length;

            questions.forEach((qDiv, idx) => {
                const correctIdx = parseInt(qDiv.dataset.correct);
                const selected = qDiv.querySelector(`input[name="q${idx}"]:checked`);
                
                // Visual feedback on the form
                const labels = qDiv.querySelectorAll('label');
                
                if (selected) {
                    if (parseInt(selected.value) === correctIdx) {
                        score++;
                        selected.parentElement.classList.add('bg-green-100', 'border-green-500');
                    } else {
                        selected.parentElement.classList.add('bg-red-100', 'border-red-500');
                        labels[correctIdx].classList.add('bg-green-100', 'border-green-500'); // Show correct answer
                    }
                } else {
                    // No answer selected
                    labels[correctIdx].classList.add('bg-green-100', 'border-green-500');
                }
            });

            // Show Modal
            const modal = document.getElementById('result-modal');
            const content = document.getElementById('result-content');
            const icon = document.getElementById('score-icon');
            
            document.getElementById('score-val').innerText = score;
            document.getElementById('score-total').innerText = total;

            if (score === total) {
                icon.innerHTML = 'ðŸ†';
                icon.className = "text-6xl mb-4 animate-bounce";
            } else if (score > total / 2) {
                icon.innerHTML = 'ðŸ‘';
            } else {
                icon.innerHTML = 'ðŸ“š';
            }

            modal.classList.remove('hidden');
            setTimeout(() => {
                content.classList.remove('scale-90', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        };

        window.closeModal = function() {
            document.getElementById('result-modal').classList.add('hidden');
        };

    </script>
</body>
</html>
