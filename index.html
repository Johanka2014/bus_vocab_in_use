<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizVocab | Professional English</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; }

        /* Smooth Animations for Background */
        @keyframes float {
            0% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-20px) translateX(10px); }
            100% { transform: translateY(0px) translateX(0px); }
        }
        @keyframes float-reverse {
            0% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(20px) translateX(-10px); }
            100% { transform: translateY(0px) translateX(0px); }
        }

        .blob {
            position: fixed;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
        }
        .blob-1 { top: -10%; left: -10%; width: 500px; height: 500px; background: #4F46E5; animation: float 8s infinite ease-in-out; }
        .blob-2 { bottom: -10%; right: -10%; width: 600px; height: 600px; background: #06B6D4; animation: float-reverse 10s infinite ease-in-out; }
        .blob-3 { top: 40%; left: 40%; width: 400px; height: 400px; background: #8B5CF6; animation: float 12s infinite ease-in-out; }

        /* Glassmorphism Cards */
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .dark .glass-panel {
            background: rgba(17, 24, 39, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Interactive Elements */
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover { transform: translateY(-2px); }
        .option-btn.selected { border-color: #4F46E5; background-color: #EEF2FF; color: #4F46E5; }
        
        .correct-answer { background-color: #D1FAE5 !important; border-color: #10B981 !important; color: #065F46 !important; }
        .wrong-answer { background-color: #FEE2E2 !important; border-color: #EF4444 !important; color: #991B1B !important; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen relative overflow-x-hidden transition-colors duration-300">

    <!-- Animated Background -->
    <div class="blob blob-1 rounded-full"></div>
    <div class="blob blob-2 rounded-full"></div>
    <div class="blob blob-3 rounded-full"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center cursor-pointer" onclick="renderView('home')">
                    <i class="fas fa-briefcase text-indigo-600 text-2xl mr-2"></i>
                    <span class="font-bold text-xl tracking-tight text-slate-900">BizVocab</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="renderView('home')" class="hover:bg-indigo-100 text-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">Home</button>
                        <button onclick="renderView('modules')" class="hover:bg-indigo-100 text-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">Modules</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main id="app-container" class="pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto relative z-10">
        <!-- Content injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-slate-500 text-sm relative z-10">
        <p>Â© 2024 Business English Hub. Based on Cambridge Professional English materials.</p>
    </footer>

    <script>
        // DATA STORE: Based on Business Vocabulary in Use (Mascull)
        const modules = [
            {
                id: 1,
                title: "Work and Jobs",
                icon: "fa-id-card",
                summary: "Discussing responsibilities, job titles, and hierarchies.",
                learning: {
                    intro: "When asking about someone's job, we say 'What do you do?'. We use specific prepositions to describe our role (work for, in charge of, responsible for).",
                    keyTerms: [
                        { term: "to work for", def: "Used with a company or person (e.g., 'I work for Google')." },
                        { term: "to work in", def: "Used with a place or department (e.g., 'I work in marketing')." },
                        { term: "to be in charge of", def: "To have control over something/someone." },
                        { term: "to deal with", def: "To handle tasks, people, or problems." },
                        { term: "responsible for", def: "Having the duty to look after something." },
                        { term: "off work", def: "Absent temporarily (illness, holiday)." },
                        { term: "out of work", def: "Unemployed; having no job." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "1.1 Match the verbs (1-5) with the correct prepositions (A-E).",
                        questions: [
                            { q: "1. to work", options: ["for / in / with", "of", "about"], answer: 0 },
                            { q: "2. to be responsible", options: ["with", "for", "of"], answer: 1 },
                            { q: "3. to be in charge", options: ["to", "for", "of"], answer: 2 },
                            { q: "4. to deal", options: ["with", "for", "at"], answer: 0 },
                            { q: "5. to work (as)", options: ["a [job title]", "a [company]", "a [place]"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "1.2 Complete the sentences with the correct preposition (in, for, of, with).",
                        questions: [
                            { text: "I work ___ a large European car maker.", answer: "for" },
                            { text: "I work ___ a factory in Birmingham.", answer: "in" },
                            { text: "I am responsible ___ production planning.", answer: "for" },
                            { text: "I am in charge ___ a team of three people.", answer: "of" },
                            { text: "I deal ___ a lot of different people in the company.", answer: "with" },
                            { text: "I deal ___ the factory manager every day.", answer: "with" }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "1.3 Complete the paragraph about Pierre's job.",
                        questions: [
                            { text: "Hi, I'm Pierre. I am a manager. I work ___ a large supermarket chain.", answer: "for" },
                            { text: "I work ___ the export department.", answer: "in" },
                            { text: "I am responsible ___ finding new suppliers.", answer: "for" },
                            { text: "I deal ___ suppliers in Italy and Spain.", answer: "with" },
                            { text: "I am also in charge ___ quality control.", answer: "of" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "1.4 Match the job description to the definition.",
                        questions: [
                            { q: "I have a full-time job.", options: ["I work the whole working week.", "I only work a few hours.", "I don't have a job."], answer: 0 },
                            { q: "I have a part-time job.", options: ["I work 40 hours a week.", "I work less than the whole week.", "I work at night."], answer: 1 },
                            { q: "I have a permanent job.", options: ["It finishes after 6 months.", "It does not finish after a fixed period.", "I am self-employed."], answer: 1 },
                            { q: "I have a temporary job.", options: ["I work for an agency.", "It finishes after a short, fixed period.", "I am the boss."], answer: 1 }
                        ]
                    }
                ],
                test: [
                    { q: "Choose the correct preposition: 'I am responsible ___ marketing.'", options: ["of", "for", "to", "with"], answer: 1 },
                    { q: "Choose the correct preposition: 'I am in charge ___ the sales team.'", options: ["for", "with", "of", "in"], answer: 2 },
                    { q: "Which is correct?", options: ["I'm a responsible.", "I'm responsible.", "I'm responser."], answer: 1 },
                    { q: "Complete: 'My work involves ___ to customers.'", options: ["talking", "talk", "to talk", "talked"], answer: 0 },
                    { q: "If you have no job, you are:", options: ["Off work", "Out of work", "Away from work", "In work"], answer: 1 },
                    { q: "If you are ill and cannot go to the office, you are:", options: ["Out of work", "Off work", "Left work", "Stopped work"], answer: 1 },
                    { q: "I work ___ a journalist.", options: ["as", "like", "for", "in"], answer: 0 },
                    { q: "Which describes a '9 to 5' job?", options: ["Shift work", "Flexitime", "Regular office hours", "Teleworking"], answer: 2 },
                    { q: "I ___ with customer complaints.", options: ["manage", "deal", "organize", "control"], answer: 1 },
                    { q: "A job that finishes after 3 months is:", options: ["Permanent", "Full-time", "Temporary", "Consultant"], answer: 2 }
                ]
            },
            {
                id: 2,
                title: "Ways of Working",
                icon: "fa-clock",
                summary: "Office routines, flexible hours, and teleworking.",
                learning: {
                    intro: "Traditional office hours (9-to-5) are changing. Business professionals now talk about flexible hours, shifts, and remote working.",
                    keyTerms: [
                        { term: "Nine-to-five", def: "Regular office hours (usually 9am to 5pm)." },
                        { term: "Flexitime", def: "A system where you choose start/finish times around 'core' hours." },
                        { term: "Shift work", def: "Working at different times (e.g., day shift, night shift)." },
                        { term: "Teleworking", def: "Working from home (also 'telecommuting')." },
                        { term: "To clock on/in", def: "To use a card/badge to record your arrival time." },
                        { term: "Stimulating", def: "Work that is interesting and makes you think." },
                        { term: "Repetitive", def: "Doing the same thing again and again (negative)." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "2.1 Match the verbs (1-5) to the nouns/phrases (A-E) to make collocations.",
                        questions: [
                            { q: "1. Clock", options: ["on / off", "up / down", "work"], answer: 0 },
                            { q: "2. Take", options: ["time off", "time out", "time away"], answer: 0 },
                            { q: "3. Work", options: ["in shifts", "at shifts", "to shifts"], answer: 0 },
                            { q: "4. Commute", options: ["to work", "at work", "for work"], answer: 0 },
                            { q: "5. Go", options: ["to work", "at work", "in work"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "2.2 Complete the sentences about types of work.",
                        questions: [
                            { text: "I work ___ hours; I start at 9am and finish at 5pm.", answer: "office" },
                            { text: "We have a ___ system, so I can start at 8am or 10am.", answer: "flexitime" },
                            { text: "Nurses often work the night ___.", answer: "shift" },
                            { text: "I am a ___ worker; I work from home and send work by email.", answer: "remote" },
                            { text: "I have to ___ in when I arrive at the factory.", answer: "clock" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "2.3 Is the adjective Positive (+) or Negative (-)?",
                        questions: [
                            { q: "Stimulating", options: ["Positive (+)", "Negative (-)"], answer: 0 },
                            { q: "Boring", options: ["Positive (+)", "Negative (-)"], answer: 1 },
                            { q: "Satisfying", options: ["Positive (+)", "Negative (-)"], answer: 0 },
                            { q: "Repetitive", options: ["Positive (+)", "Negative (-)"], answer: 1 },
                            { q: "Fascinating", options: ["Positive (+)", "Negative (-)"], answer: 0 },
                            { q: "Tough", options: ["Positive (+)", "Negative (-)"], answer: 1 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "2.4 Complete the description of a job.",
                        questions: [
                            { text: "My job is very ___; I do the same thing all day.", answer: "routine" },
                            { text: "It is also very ___; I am always tired at the end of the day.", answer: "tiring" },
                            { text: "However, the salary is good and the work is ___.", answer: "permanent" }
                        ]
                    }
                ],
                test: [
                    { q: "Which is correct? 'I work ___ home once a week.'", options: ["at", "from", "in", "by"], answer: 1 },
                    { q: "I have to ___ on at 8:30 AM.", options: ["watch", "time", "clock", "check"], answer: 2 },
                    { q: "Another word for 'teleworking' is:", options: ["Telecommuting", "Shift working", "Flexi-working", "Homeworking"], answer: 0 },
                    { q: "My job is ___; it's very interesting and gives me energy.", options: ["boring", "stimulating", "repetitive", "dull"], answer: 1 },
                    { q: "I hate my daily ___ to the city center.", options: ["travel", "commute", "trip", "move"], answer: 1 },
                    { q: "My job involves paperwork. It is very ___.", options: ["fascinating", "dull", "tough", "creative"], answer: 1 },
                    { q: "Flexitime allows you to vary your:", options: ["Salary", "Start and finish times", "Job title", "Office location"], answer: 1 },
                    { q: "People who work at night are on the:", options: ["Night train", "Night shift", "Night time", "Night clock"], answer: 1 },
                    { q: "If you work hard and enjoy it, the job is:", options: ["Satisfying", "Tiring", "Routine", "Repetitive"], answer: 0 },
                    { q: "I work irregular hours. I don't have a ___ job.", options: ["nine-to-five", "ten-to-six", "clock-on", "full-day"], answer: 0 }
                ]
            },
            {
                id: 3,
                title: "Recruitment and Selection",
                icon: "fa-user-plus",
                summary: "The hiring process: applications, CVs, and interviews.",
                learning: {
                    intro: "Recruitment is the process of finding people for jobs. This involves applying, interviewing, and selecting the best candidate.",
                    keyTerms: [
                        { term: "Recruit / Hire", def: "To employ new people." },
                        { term: "Headhunter", def: "A recruiter who finds senior managers for companies." },
                        { term: "CV (Curriculum Vitae)", def: "A document detailing your education and experience (Resume in US)." },
                        { term: "Apply for", def: "To make a formal request for a job." },
                        { term: "Shortlist", def: "A small list of selected candidates to interview." },
                        { term: "Reference", def: "A letter from a previous employer about your work." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "3.1 Match the verbs (1-5) to the nouns (A-E) to make phrases.",
                        questions: [
                            { q: "1. Apply for", options: ["a job", "an interview", "a contract"], answer: 0 },
                            { q: "2. Fill in", options: ["an application form", "a CV", "a letter"], answer: 0 },
                            { q: "3. Attend", options: ["an interview", "a job", "a candidate"], answer: 0 },
                            { q: "4. Hire", options: ["a new employee", "a new boss", "a new office"], answer: 0 },
                            { q: "5. Advertise", options: ["a vacancy", "a candidate", "a shortlist"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "3.2 Complete the recruitment process.",
                        questions: [
                            { text: "First, the company advertises a ___.", answer: "vacancy" },
                            { text: "People send in their CVs and ___ letters.", answer: "covering" },
                            { text: "The company selects the best candidates for a ___.", answer: "shortlist" },
                            { text: "They invite these candidates for an ___.", answer: "interview" },
                            { text: "Finally, they make a job ___ to the best person.", answer: "offer" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "3.3 Match the definition to the correct person.",
                        questions: [
                            { q: "A person who is applying for a job.", options: ["Candidate/Applicant", "Referee", "Headhunter"], answer: 0 },
                            { q: "A specialist who finds managers for companies.", options: ["Headhunter", "Applicant", "Employee"], answer: 0 },
                            { q: "A person who gives a reference for a candidate.", options: ["Referee", "Employer", "Interviewer"], answer: 0 },
                            { q: "The group of people who choose the new employee.", options: ["Selection panel", "Candidates", "Agencies"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "To ask for a job, you ___ it.", options: ["apply for", "apply to", "ask to", "demand"], answer: 0 },
                    { q: "A document describing your life and work history is a:", options: ["CV", "Form", "History", "Note"], answer: 0 },
                    { q: "When you start a job, you often have a ___ period.", options: ["testing", "probationary", "trying", "starting"], answer: 1 },
                    { q: "The list of people chosen for an interview is the:", options: ["Longlist", "Checklist", "Shortlist", "Blacklist"], answer: 2 },
                    { q: "We advertised the vacancy in the '___ vacant' section.", options: ["situations", "jobs", "works", "places"], answer: 0 },
                    { q: "If you don't get the job, they ___ you down.", options: ["put", "turn", "take", "send"], answer: 1 },
                    { q: "Another word for 'hire' is:", options: ["Appoint", "Apply", "Arrange", "Accept"], answer: 0 },
                    { q: "Written opinions about your past work are called:", options: ["Notes", "Ideas", "References", "Papers"], answer: 2 },
                    { q: "Headhunters usually look for:", options: ["Junior staff", "Senior managers", "Temporary workers", "Students"], answer: 1 },
                    { q: "If the company wants you, they make an:", options: ["Offer", "Order", "Option", "Opening"], answer: 0 }
                ]
            },
            {
                id: 4,
                title: "Skills and Qualifications",
                icon: "fa-graduation-cap",
                summary: "Education, degrees, and essential workplace skills.",
                learning: {
                    intro: "Employers look for a mix of qualifications (degrees, diplomas) and skills (abilities you have learned).",
                    keyTerms: [
                        { term: "Graduate", def: "A person who has a university degree." },
                        { term: "MBA", def: "Master of Business Administration (a postgraduate degree)." },
                        { term: "Skilled", def: "Having the special training/knowledge to do a job." },
                        { term: "Computer-literate", def: "Able to use computers well." },
                        { term: "Numerate", def: "Good with numbers." },
                        { term: "Methodical", def: "Working in a planned, organized way." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "4.1 Match the abbreviation to the full title.",
                        questions: [
                            { q: "1. BA / BSc", options: ["Bachelor of Arts/Science", "Basic Art/Science", "Business of Arts"], answer: 0 },
                            { q: "2. MBA", options: ["Master of Business Administration", "Member of Business Association", "Manager of Business Area"], answer: 0 },
                            { q: "3. PhD", options: ["Doctor of Philosophy", "Private Higher Degree", "Public Health Department"], answer: 0 },
                            { q: "4. MSc", options: ["Master of Science", "Member of Science", "Major Science"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "4.2 Complete the sentences with the correct word (graduated, degree, training, experience).",
                        questions: [
                            { text: "I ___ from Edinburgh University last year.", answer: "graduated" },
                            { text: "I have a ___ in Economics.", answer: "degree" },
                            { text: "The company provides in-house ___ for new staff.", answer: "training" },
                            { text: "I have three years of relevant work ___.", answer: "experience" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "4.3 Match the definition to the skill/characteristic.",
                        questions: [
                            { q: "Good with numbers.", options: ["Numerate", "Literate", "Skilled"], answer: 0 },
                            { q: "Good with computers.", options: ["Computer-literate", "Technician", "Analyst"], answer: 0 },
                            { q: "Driven and wants to succeed.", options: ["Motivated", "Methodical", "Numerate"], answer: 0 },
                            { q: "Works in a planned, orderly way.", options: ["Methodical", "Talented", "Social"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "A person with a university degree is a:", options: ["Graduate", "Student", "Professor", "Learner"], answer: 0 },
                    { q: "I have a master's ___ in Engineering.", options: ["degree", "certificate", "paper", "mark"], answer: 0 },
                    { q: "Which is a postgraduate degree?", options: ["MBA", "BSc", "BA", "High School Diploma"], answer: 0 },
                    { q: "Someone who cleans the office is usually:", options: ["Unskilled", "Highly skilled", "Management", "Graduate"], answer: 0 },
                    { q: "We need someone who is ___; good with figures.", options: ["numerate", "literate", "numbered", "counting"], answer: 0 },
                    { q: "A 'self-starter' is someone who is:", options: ["Proactive/Motivated", "Lazy", "New", "Unemployed"], answer: 0 },
                    { q: "Training inside the company is called:", options: ["In-house training", "Out-house training", "Inside training", "Home training"], answer: 0 },
                    { q: "Experience you get by doing the job is:", options: ["Hands-on", "Heads-up", "Feet-first", "Hands-off"], answer: 0 },
                    { q: "If you lack experience, you are:", options: ["Inexperienced", "Unexperienced", "Disexperienced", "Non-experienced"], answer: 0 },
                    { q: "To 'acquire' a skill means to:", options: ["Learn/Get it", "Lose it", "Buy it", "Sell it"], answer: 0 }
                ]
            },
            {
                id: 5,
                title: "Pay and Benefits",
                icon: "fa-money-bill-wave",
                summary: "Salaries, wages, commissions, and fringe benefits.",
                learning: {
                    intro: "We work for money! This module covers the difference between wages and salary, and other parts of the compensation package.",
                    keyTerms: [
                        { term: "Wages", def: "Money paid weekly, usually to manual workers." },
                        { term: "Salary", def: "Money paid monthly, usually to office staff/managers." },
                        { term: "Perks / Benefits", def: "Extra advantages (e.g., company car, free lunch), also called 'fringe benefits'." },
                        { term: "Bonus", def: "Extra money paid for good results." },
                        { term: "Commission", def: "A percentage of sales value paid to salespeople." },
                        { term: "Remuneration", def: "Formal word for pay or salary." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "5.1 Match the payment type to the definition.",
                        questions: [
                            { q: "1. Wages", options: ["Paid monthly", "Paid weekly (manual work)", "Paid annually"], answer: 1 },
                            { q: "2. Salary", options: ["Paid monthly (professional work)", "Paid daily", "Paid for overtime"], answer: 0 },
                            { q: "3. Commission", options: ["Fixed pay", "Percentage of sales", "Pension"], answer: 1 },
                            { q: "4. Bonus", options: ["Extra money for results", "Travel money", "Basic pay"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "5.2 Complete the sentences about pay.",
                        questions: [
                            { text: "I work in a shop. I get a basic salary plus ___ on what I sell.", answer: "commission" },
                            { text: "The company pays for my medical insurance. It is a nice ___.", answer: "perk" },
                            { text: "My total remuneration ___ is worth $60,000.", answer: "package" },
                            { text: "We work ___ if we stay late at the office.", answer: "overtime" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "5.3 Classify: Is it Pay (Money) or a Benefit (Perk)?",
                        questions: [
                            { q: "Company Car", options: ["Pay", "Benefit/Perk"], answer: 1 },
                            { q: "Basic Salary", options: ["Pay", "Benefit/Perk"], answer: 0 },
                            { q: "Free Lunches", options: ["Pay", "Benefit/Perk"], answer: 1 },
                            { q: "Overtime Pay", options: ["Pay", "Benefit/Perk"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "Manual workers (e.g. factory workers) are usually paid:", options: ["Salary", "Wages", "Fees", "Tips"], answer: 1 },
                    { q: "Professional staff are usually paid a monthly:", options: ["Wage", "Salary", "Commission", "Bill"], answer: 1 },
                    { q: "Extra money for working late is called:", options: ["Overtime", "Undertime", "Part-time", "Full-time"], answer: 0 },
                    { q: "A 'Golden Handshake' is given when you:", options: ["Join a company", "Leave a company", "Sign a contract", "Make a sale"], answer: 1 },
                    { q: "Non-financial advantages (like a car) are called:", options: ["Fringe benefits", "Gross pay", "Net pay", "Deductions"], answer: 0 },
                    { q: "Money removed from your pay for tax is a:", options: ["Reduction", "Deduction", "Addition", "Bonus"], answer: 1 },
                    { q: "Pay before tax is called:", options: ["Net pay", "Gross pay", "High pay", "Full pay"], answer: 1 },
                    { q: "Pay after tax (what you take home) is:", options: ["Gross pay", "Net pay", "Real pay", "Lost pay"], answer: 1 },
                    { q: "Another formal word for 'Pay' is:", options: ["Remuneration", "Repayment", "Refund", "Reward"], answer: 0 },
                    { q: "Salespeople often earn a ___ on everything they sell.", options: ["percent", "commission", "salary", "wage"], answer: 1 }
                ]
            },
            {
                id: 6,
                title: "People and Workplaces",
                icon: "fa-users",
                summary: "Employees, management, and different types of work environments.",
                learning: {
                    intro: "We look at words for the people who work in a company (staff, workforce) and the places they work (head office, branches).",
                    keyTerms: [
                        { term: "Employees / Staff", def: "The people who work for a company. 'Staff' is a plural noun." },
                        { term: "Management", def: "The people who lead and organize the company." },
                        { term: "Workforce", def: "All the people working in a country, industry, or company." },
                        { term: "Head Office / Headquarters", def: "The main office of a company (HQ)." },
                        { term: "Branch", def: "A local office or shop." },
                        { term: "Human Resources (HR)", def: "The department looking after staff/personnel." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "6.1 Match the term to the definition.",
                        questions: [
                            { q: "1. Staff", options: ["All the workers (plural)", "One worker (singular)", "The bosses"], answer: 0 },
                            { q: "2. Employee", options: ["A person who works for someone", "A person who employs others", "A customer"], answer: 0 },
                            { q: "3. Personnel", options: ["Another word for staff/HR", "Personal things", "Office equipment"], answer: 0 },
                            { q: "4. Administration", options: ["Day-to-day office support", "Factory work", "Sales"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "6.2 Complete the sentences.",
                        questions: [
                            { text: "I work in the ___ office in London, not a branch.", answer: "head" },
                            { text: "We have a large ___; over 500 people work here.", answer: "workforce" },
                            { text: "If you have a problem with your pay, talk to ___.", answer: "hr" },
                            { text: "We work in an ___ office; there are no walls between desks.", answer: "open-plan" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "6.3 Match the definition to the labor relation term.",
                        questions: [
                            { q: "When workers stop working to protest.", options: ["Strike", "Holiday", "Break"], answer: 0 },
                            { q: "An organization that protects workers' rights.", options: ["Trade Union", "Club", "Management"], answer: 0 },
                            { q: "A disagreement between management and labor.", options: ["Dispute", "Deal", "Agreement"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "Which is correct? 'The staff ___ not happy.'", options: ["is", "are", "be", "was"], answer: 1 },
                    { q: "Someone who works for a company is an:", options: ["Employer", "Employee", "Employ", "Employment"], answer: 1 },
                    { q: "The main building of a large company is the:", options: ["Headquarters", "Head house", "Main house", "Base camp"], answer: 0 },
                    { q: "HR stands for:", options: ["Human Remains", "Human Resources", "Huge Resources", "Human Rights"], answer: 1 },
                    { q: "Support staff who do paperwork are in:", options: ["Administration", "Production", "Manual labor", "Design"], answer: 0 },
                    { q: "If workers are unhappy, there might be a labor ___.", options: ["fight", "dispute", "war", "argument"], answer: 1 },
                    { q: "A local office of a bank or shop is a:", options: ["Branch", "Leaf", "Stick", "Part"], answer: 0 },
                    { q: "An office with no individual rooms is:", options: ["Open-plan", "Open-air", "Closed-plan", "Wide-plan"], answer: 0 },
                    { q: "The people who run the company are the:", options: ["Management", "Managed", "Managerial", "Managing"], answer: 0 },
                    { q: "To stop working as a protest is to go on ___.", options: ["stop", "strike", "smash", "slack"], answer: 1 }
                ]
            },
            {
                id: 7,
                title: "The Career Ladder",
                icon: "fa-arrow-trend-up",
                summary: "Promotion, resignation, dismissal, and retirement.",
                learning: {
                    intro: "A career path is not always straight. We look at how people move up (promotion), move out (resign/retire), or are forced to leave (dismissal).",
                    keyTerms: [
                        { term: "Promotion", def: "Getting a higher/better job in the same company." },
                        { term: "Resign", def: "To leave a job voluntarily (e.g., for a new job)." },
                        { term: "Retire", def: "To stop working completely (usually at 65+)." },
                        { term: "Dismissed / Sacked", def: "To be forced to leave because you did something wrong." },
                        { term: "Made redundant", def: "To lose your job because the company doesn't need you anymore." },
                        { term: "Notice period", def: "The time you must work after saying you are leaving." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "7.1 Match the verb to the definition.",
                        questions: [
                            { q: "1. To be promoted", options: ["Get a better job", "Lose a job", "Leave a job"], answer: 0 },
                            { q: "2. To resign", options: ["Be forced to leave", "Leave voluntarily", "Stop working at 65"], answer: 1 },
                            { q: "3. To be sacked", options: ["Leave because of bad work", "Leave because of no work", "Leave for a holiday"], answer: 0 },
                            { q: "4. To retire", options: ["Stop working at 65", "Start working", "Change jobs"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "7.2 Complete the career history.",
                        questions: [
                            { text: "I didn't like my boss, so I decided to ___.", answer: "resign" },
                            { text: "I handed in my one-month ___.", answer: "notice" },
                            { text: "Luckily, I got a ___ to Senior Manager in my new company.", answer: "promotion" },
                            { text: "My father is 65; he plans to ___ next year.", answer: "retire" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "7.3 Complete the phrases (Collocations).",
                        questions: [
                            { q: "Hand in your...", options: ["Notice", "Job", "Sack"], answer: 0 },
                            { q: "Climb the career...", options: ["Ladder", "Stairs", "Wall"], answer: 0 },
                            { q: "Get the...", options: ["Sack", "Bag", "Door"], answer: 0 },
                            { q: "Early...", options: ["Retirement", "Leaving", "Stopping"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "She moved ___ the career ladder.", options: ["up", "on", "in", "at"], answer: 0 },
                    { q: "He stole money from the company, so he got the ___.", options: ["sack", "bag", "push", "stick"], answer: 0 },
                    { q: "The company closed the factory and 500 people were made ___.", options: ["redundant", "sacked", "dismissed", "fired"], answer: 0 },
                    { q: "I want to leave, so I will hand in my ___.", options: ["notice", "note", "news", "notification"], answer: 0 },
                    { q: "Formal word for 'sacked' is:", options: ["Dismissed", "Deleted", "Departed", "Destroyed"], answer: 0 },
                    { q: "Money paid to someone when they are made redundant is:", options: ["Severance pay", "Bonus", "Commission", "Tips"], answer: 0 },
                    { q: "If you stop working at 60 instead of 65, you take ___ retirement.", options: ["early", "fast", "quick", "young"], answer: 0 },
                    { q: "If you are 'out of work', you are:", options: ["Unemployed", "Retired", "On holiday", "Sick"], answer: 0 },
                    { q: "Moving to a lower job is called being:", options: ["Demoted", "Promoted", "Remoted", "Deleted"], answer: 0 },
                    { q: "Money you receive after retirement is called a:", options: ["Pension", "Salary", "Wage", "Fee"], answer: 0 }
                ]
            },
            {
                id: 8,
                title: "Problems at Work",
                icon: "fa-triangle-exclamation",
                summary: "Health and safety, bullying, discrimination, and dismissal.",
                learning: {
                    intro: "Workplaces can have problems. We need to know the words for health hazards, harassment, discrimination, and legal disputes.",
                    keyTerms: [
                        { term: "Health and Safety", def: "Rules and procedures to prevent accidents and injury." },
                        { term: "Bullying", def: "Using power or strength to hurt or frighten others." },
                        { term: "Sexual harassment", def: "Unwanted behavior of a sexual nature." },
                        { term: "Glass ceiling", def: "An invisible barrier preventing women/minorities from top jobs." },
                        { term: "Discrimination", def: "Treating someone differently due to race, gender, or age." },
                        { term: "Dismissal", def: "Being fired from a job." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "8.1 Match the problem to the definition.",
                        questions: [
                            { q: "1. Sexual Harassment", options: ["Sexually offensive behavior", "Shouting at people", "Ignoring people"], answer: 0 },
                            { q: "2. Bullying", options: ["Using power to hurt/frighten", "Being late", "Working too hard"], answer: 0 },
                            { q: "3. Glass Ceiling", options: ["Invisible barrier to promotion", "Broken window", "A transparent roof"], answer: 0 },
                            { q: "4. Racial Discrimination", options: ["Treating unfairly due to race", "Treating unfairly due to age", "Treating unfairly due to sex"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "8.2 Complete the Health and Safety sentences.",
                        questions: [
                            { text: "We had a fire ___ yesterday; we all had to leave the building.", answer: "drill" },
                            { text: "The health and safety ___ visited the factory.", answer: "inspector" },
                            { text: "He had a bad ___ with a machine and hurt his hand.", answer: "accident" },
                            { text: "There is a ___ aid box in the kitchen.", answer: "first" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "8.3 Match the terms (A-D) to the context (1-4).",
                        questions: [
                            { q: "1. Affirmative Action", options: ["Equal opportunities for minorities", "Firing people", "Stopping work"], answer: 0 },
                            { q: "2. Verbal abuse", options: ["Shouting/insulting someone", "Hitting someone", "Ignoring someone"], answer: 0 },
                            { q: "3. Unfair dismissal", options: ["Fired without good reason", "Fired for stealing", "Resigning"], answer: 0 },
                            { q: "4. Tribunal", options: ["A type of court for work disputes", "A type of office", "A type of job"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "Treating someone unfairly because of their race is:", options: ["Racial discrimination", "Ageism", "Sexism", "Favoritism"], answer: 0 },
                    { q: "The '___ ceiling' stops women getting top jobs.", options: ["glass", "brick", "stone", "wood"], answer: 0 },
                    { q: "If you are fired without a good reason, you can claim:", options: ["Unfair dismissal", "Fair dismissal", "Good dismissal", "Bad dismissal"], answer: 0 },
                    { q: "Someone who inspects the factory for danger is a:", options: ["Health and safety inspector", "Doctor", "Manager", "Police"], answer: 0 },
                    { q: "Unwanted touching or comments is called:", options: ["Sexual harassment", "Friendly behavior", "Socializing", "Networking"], answer: 0 },
                    { q: "If you are hurt at work, you can claim ___.", options: ["compensation", "salary", "wages", "bonus"], answer: 0 },
                    { q: "Positive action to help minorities is called:", options: ["Affirmative action", "Negative action", "Neutral action", "Direct action"], answer: 0 },
                    { q: "A person who bullies others is a:", options: ["Bully", "Bull", "Boss", "Buddy"], answer: 0 },
                    { q: "Practicing leaving the building in case of fire is a:", options: ["Fire drill", "Fire run", "Fire walk", "Fire test"], answer: 0 },
                    { q: "Legal disputes between workers and employers often go to a:", options: ["Tribunal", "Station", "Office", "Shop"], answer: 0 }
                ]
            },
            {
                id: 9,
                title: "Managers, Executives, Directors",
                icon: "fa-user-tie",
                summary: "Understanding the hierarchy: from line managers to the boardroom.",
                learning: {
                    intro: "Senior managers are often called executives. The top people are directors who sit on the board. The CEO (Chief Executive Officer) runs the company day-to-day.",
                    keyTerms: [
                        { term: "Manager", def: "A person responsible for controlling or administering an organization or group of staff." },
                        { term: "Executive", def: "A senior manager in a business." },
                        { term: "Director", def: "A senior person who manages the company's affairs." },
                        { term: "CEO (Chief Executive Officer)", def: "The highest-ranking person in a company." },
                        { term: "Chairman / Chairperson", def: "The person who leads the Board of Directors meetings." },
                        { term: "Non-executive Director", def: "An outsider who provides independent advice to the board." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "9.1 Match the job title to the function.",
                        questions: [
                            { q: "1. Chairman", options: ["Leads the board meetings", "Runs the company day-to-day", "Looks after the accounts"], answer: 0 },
                            { q: "2. CEO / MD", options: ["Runs the company day-to-day", "Provides independent advice", "Heads the IT department"], answer: 0 },
                            { q: "3. Non-Executive Director", options: ["Provides independent advice", "Manages the staff", "Sells products"], answer: 0 },
                            { q: "4. CFO (Chief Finance Officer)", options: ["Looks after the money/accounts", "Looks after marketing", "Looks after people"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "9.2 Complete the sentences about hierarchy.",
                        questions: [
                            { text: "I am a Line Manager. I ___ to the Marketing Director.", answer: "report" },
                            { text: "She is the Head ___ IT.", answer: "of" },
                            { text: "He is in ___ of the Sales Department.", answer: "charge" },
                            { text: "We need approval from the ___ of Directors.", answer: "board" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "9.3 Match the term to the definition.",
                        questions: [
                            { q: "1. The Boardroom", options: ["Where directors meet", "Where staff eat lunch", "Where reception is"], answer: 0 },
                            { q: "2. Senior Executive", options: ["A top-level manager", "A new employee", "A cleaner"], answer: 0 },
                            { q: "3. Middle Management", options: ["Managers between senior and junior staff", "The directors", "The workers"], answer: 0 },
                            { q: "4. Budget", options: ["The plan for spending money", "The plan for hiring", "The plan for sales"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "In the US, the top manager is usually called the:", options: ["CEO", "President", "Manager", "Leader"], answer: 0 },
                    { q: "In the UK, the top manager is often called the:", options: ["MD (Managing Director)", "Top Director", "Head Director", "Lead Director"], answer: 0 },
                    { q: "The person who leads the board meetings is the:", options: ["Chairman/Chairperson", "CEO", "CFO", "Secretary"], answer: 0 },
                    { q: "CFO stands for:", options: ["Chief Finance Officer", "Chief Fun Officer", "Chief First Officer", "Central Finance Office"], answer: 0 },
                    { q: "A director who is NOT employed by the company is:", options: ["Non-executive", "Executive", "Inactive", "External"], answer: 0 },
                    { q: "COO stands for:", options: ["Chief Operating Officer", "Chief Organizing Officer", "Central Operating Officer", "Company Operating Officer"], answer: 0 },
                    { q: "Managers who are directly responsible for staff are:", options: ["Line managers", "Row managers", "Staff managers", "Direct managers"], answer: 0 },
                    { q: "Managers between the top and the bottom are:", options: ["Middle management", "Center management", "Halfway management", "Mid-management"], answer: 0 },
                    { q: "If you 'head' a department, you are:", options: ["The boss of it", "The newest person in it", "Leaving it", "Applying for it"], answer: 0 },
                    { q: "The group of people who govern the company is the:", options: ["Board", "Bench", "Table", "Desk"], answer: 0 }
                ]
            },
            {
                id: 10,
                title: "Business People and Business Leaders",
                icon: "fa-chess-king",
                summary: "Entrepreneurs, tycoons, magnates, and leadership styles.",
                learning: {
                    intro: "We describe business leaders with powerful words. Someone who starts a business is an entrepreneur. A rich and powerful business person might be a tycoon or magnate.",
                    keyTerms: [
                        { term: "Entrepreneur", def: "Someone who starts their own business, often taking risks." },
                        { term: "Founder", def: "Someone who establishes/starts an organization." },
                        { term: "Tycoon / Magnate / Mogul", def: "A wealthy and powerful business person (e.g., a media mogul)." },
                        { term: "Business Empire", def: "A large group of companies owned by one person or family." },
                        { term: "Leadership Skills", def: "The ability to inspire and guide others." }
                    ]
                },
                exercises: [
                    {
                        type: "match",
                        instruction: "10.1 Match the term to the definition.",
                        questions: [
                            { q: "1. Entrepreneur", options: ["Starts own business", "Manages a shop", "Works for the government"], answer: 0 },
                            { q: "2. Founder", options: ["Starts an organization", "Finds lost items", "Funds a project"], answer: 0 },
                            { q: "3. Magnate", options: ["Powerful business person", "A type of magnet", "A manager"], answer: 0 },
                            { q: "4. Leader", options: ["Guides/inspires others", "Follows orders", "Writes reports"], answer: 0 }
                        ]
                    },
                    {
                        type: "gapfill",
                        instruction: "10.2 Complete the sentences about business leaders.",
                        questions: [
                            { text: "Rupert Murdoch is a famous media ___.", answer: "mogul" },
                            { text: "Richard Branson is the ___ of the Virgin Group.", answer: "founder" },
                            { text: "She built a huge business ___ selling cosmetics.", answer: "empire" },
                            { text: "To be a good leader, you need ___ skills.", answer: "leadership" }
                        ]
                    },
                    {
                        type: "match",
                        instruction: "10.3 Collocations: Match the words.",
                        questions: [
                            { q: "Media...", options: ["Magnate", "Leader", "Founder"], answer: 0 },
                            { q: "Property...", options: ["Tycoon", "Manager", "Starter"], answer: 0 },
                            { q: "Software...", options: ["Tycoon", "House", "Shop"], answer: 0 },
                            { q: "Business...", options: ["Leader", "Follower", "Worker"], answer: 0 }
                        ]
                    }
                ],
                test: [
                    { q: "Someone who starts a business is an:", options: ["Entrepreneur", "Enterprise", "Enterpriser", "Entrant"], answer: 0 },
                    { q: "A very rich and powerful business person is a:", options: ["Tycoon", "Type", "Typhoon", "Tiger"], answer: 0 },
                    { q: "Another word for tycoon is:", options: ["Magnate", "Magnet", "Magnum", "Magic"], answer: 0 },
                    { q: "A media ___ owns many newspapers and TV channels.", options: ["mogul", "model", "mobile", "module"], answer: 0 },
                    { q: "The person who started the company is the:", options: ["Founder", "Finder", "Funder", "Father"], answer: 0 },
                    { q: "Warren Buffett is a famous business ___.", options: ["leader", "reader", "feeder", "seeder"], answer: 0 },
                    { q: "A large group of businesses is an:", options: ["Empire", "Emperor", "Empress", "Umpire"], answer: 0 },
                    { q: "A key quality for a leader is:", options: ["Charisma", "Chaos", "Charm", "Chant"], answer: 0 },
                    { q: "Entrepreneurs often take ___.", options: ["risks", "rests", "rushes", "roles"], answer: 0 },
                    { q: "To 'found' a company means to:", options: ["Start it", "Find it", "Sell it", "Buy it"], answer: 0 }
                ]
            }
            // TO ADD MORE MODULES: Copy the structure above and change ID/Content based on the PDF.
        ];

        // APP STATE
        let currentView = 'home';
        let currentModuleId = null;

        // INIT
        document.addEventListener('DOMContentLoaded', () => {
            renderView('home');
        });

        // VIEW CONTROLLER
        function renderView(viewName, moduleId = null) {
            const app = document.getElementById('app-container');
            app.innerHTML = ''; // Clear content
            app.style.opacity = 0; // Fade out effect

            setTimeout(() => {
                if (viewName === 'home') renderHome(app);
                else if (viewName === 'modules') renderModules(app);
                else if (viewName === 'module-detail') renderModuleDetail(app, moduleId);
                else if (viewName === 'test') renderTest(app, moduleId);
                
                app.style.transition = 'opacity 0.5s ease';
                app.style.opacity = 1;
            }, 200);
        }

        // RENDERERS
        function renderHome(container) {
            container.innerHTML = `
                <div class="text-center py-16">
                    <h1 class="text-5xl md:text-6xl font-bold text-slate-900 mb-6 tracking-tight">
                        Master Business <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-cyan-500">English</span>
                    </h1>
                    <p class="text-xl text-slate-600 mb-10 max-w-2xl mx-auto">
                        Enhance your workplace vocabulary with interactive modules designed for B2 professionals. 
                        Based on the Cambridge Business Vocabulary curriculum.
                    </p>
                    <button onclick="renderView('modules')" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-full shadow-lg transform transition hover:scale-105">
                        Start Learning <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                    <div class="glass-panel p-6 rounded-xl shadow-sm text-center">
                        <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600">
                            <i class="fas fa-book-open text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Detailed Theory</h3>
                        <p class="text-slate-600">Learn definitions, collocations, and grammar rules for the workplace.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-xl shadow-sm text-center">
                        <div class="w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4 text-cyan-600">
                            <i class="fas fa-laptop-code text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Interactive Practice</h3>
                        <p class="text-slate-600">Gap fills and matching exercises to reinforce your learning.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-xl shadow-sm text-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-600">
                            <i class="fas fa-chart-line text-xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Module Tests</h3>
                        <p class="text-slate-600">Test your knowledge at the end of each module to track progress.</p>
                    </div>
                </div>
            `;
        }

        function renderModules(container) {
            let html = `
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">Learning Modules</h2>
                    <p class="text-slate-600">Select a topic to begin studying.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            `;

            modules.forEach(mod => {
                html += `
                    <div class="glass-panel rounded-xl p-6 hover:shadow-md transition cursor-pointer group" onclick="renderView('module-detail', ${mod.id})">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-xs font-bold uppercase text-indigo-500 tracking-wider">Module ${mod.id}</span>
                            <i class="fas ${mod.icon} text-slate-400 group-hover:text-indigo-600 transition"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition">${mod.title}</h3>
                        <p class="text-slate-600 text-sm mb-4">${mod.summary}</p>
                        <div class="w-full bg-slate-200 rounded-full h-1.5 mt-2">
                            <div class="bg-indigo-500 h-1.5 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function renderModuleDetail(container, id) {
            const mod = modules.find(m => m.id === id);
            
            let html = `
                <button onclick="renderView('modules')" class="mb-6 text-slate-500 hover:text-indigo-600 transition">
                    <i class="fas fa-arrow-left mr-1"></i> Back to Modules
                </button>
                
                <div class="glass-panel rounded-2xl p-8 mb-8 border-l-4 border-indigo-500">
                    <h1 class="text-3xl font-bold text-slate-900 mb-2">Unit ${mod.id}: ${mod.title}</h1>
                    <p class="text-lg text-slate-600">${mod.learning.intro}</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Theory Section -->
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-xl shadow-sm p-6 sticky top-24">
                            <h3 class="text-xl font-bold text-slate-800 mb-4 border-b pb-2">Key Vocabulary</h3>
                            <ul class="space-y-4">
                                ${mod.learning.keyTerms.map(term => `
                                    <li>
                                        <span class="block font-bold text-indigo-600">${term.term}</span>
                                        <span class="text-sm text-slate-600">${term.def}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>

                    <!-- Exercises Section -->
                    <div class="lg:col-span-2 space-y-8">
                        ${mod.exercises.map((ex, index) => renderExercise(ex, index)).join('')}
                        
                        <div class="glass-panel p-8 rounded-xl text-center mt-10">
                            <h3 class="text-2xl font-bold mb-4">Ready to test yourself?</h3>
                            <button onclick="renderView('test', ${mod.id})" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">
                                Take Module Test
                            </button>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function renderExercise(ex, index) {
            let content = '';
            
            if (ex.type === 'gapfill') {
                content = `<div class="space-y-4">`;
                ex.questions.forEach((q, qIdx) => {
                    const parts = q.text.split('___');
                    content += `
                        <div class="flex items-baseline flex-wrap gap-2 text-lg">
                            <span>${qIdx + 1}. ${parts[0]}</span>
                            <input type="text" data-ans="${q.answer}" class="gap-input bg-white border border-slate-300 rounded px-2 py-1 focus:ring-2 focus:ring-indigo-500 outline-none w-32 text-center font-bold text-indigo-600" placeholder="?">
                            <span>${parts[1] || ''}</span>
                            <span class="feedback-icon hidden ml-2"></span>
                        </div>
                    `;
                });
                content += `</div>`;
            } else if (ex.type === 'match') {
                content = `<div class="space-y-6">`;
                ex.questions.forEach((q, qIdx) => {
                    content += `
                        <div class="bg-white p-4 rounded-lg border border-slate-100">
                            <p class="font-medium mb-3">${qIdx + 1}. ${q.q}</p>
                            <div class="flex flex-wrap gap-2">
                                ${q.options.map((opt, oIdx) => `
                                    <button onclick="selectOption(this, ${q.answer === oIdx})" class="option-btn border border-slate-300 px-4 py-2 rounded-full text-sm hover:bg-slate-50 transition">
                                        ${opt}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    `;
                });
                content += `</div>`;
            }

            return `
                <div class="glass-panel p-6 rounded-xl">
                    <div class="flex items-center mb-4">
                        <span class="bg-indigo-100 text-indigo-700 text-xs font-bold px-2 py-1 rounded uppercase mr-2">Activity ${index + 1}</span>
                        <h4 class="font-bold text-slate-800">${ex.instruction}</h4>
                    </div>
                    ${content}
                    ${ex.type === 'gapfill' ? `<button onclick="checkGapFill(this)" class="mt-4 text-sm bg-slate-800 text-white px-4 py-2 rounded hover:bg-slate-700 transition">Check Answers</button>` : ''}
                </div>
            `;
        }

        function renderTest(container, id) {
            const mod = modules.find(m => m.id === id);
            
            let html = `
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-10">
                        <span class="text-indigo-600 font-bold tracking-wider uppercase text-sm">Assessment</span>
                        <h2 class="text-3xl font-bold text-slate-900 mt-2">Test: ${mod.title}</h2>
                    </div>

                    <div class="space-y-6" id="test-form">
                        ${mod.test.map((q, idx) => `
                            <div class="glass-panel p-6 rounded-xl test-question" data-correct="${q.answer}">
                                <p class="text-lg font-medium mb-4"><span class="text-slate-400 mr-2">${idx + 1}.</span>${q.q.replace('___', '______')}</p>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                    ${q.options.map((opt, oIdx) => `
                                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-indigo-50 transition border-slate-200">
                                            <input type="radio" name="q${idx}" value="${oIdx}" class="text-indigo-600 focus:ring-indigo-500 h-4 w-4">
                                            <span class="ml-3 text-slate-700">${opt}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="mt-10 text-center pb-20">
                        <button onclick="submitTest()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-10 rounded-full shadow-lg transform transition hover:scale-105 text-lg">
                            Submit Answers
                        </button>
                        <button onclick="renderView('module-detail', ${id})" class="ml-4 text-slate-500 underline">Cancel</button>
                    </div>
                </div>

                <!-- Result Modal Overlay -->
                <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center px-4">
                    <div class="bg-white rounded-2xl p-8 max-w-md w-full text-center shadow-2xl transform scale-90 opacity-0 transition-all duration-300" id="result-content">
                        <div id="score-icon" class="text-6xl mb-4"></div>
                        <h3 class="text-2xl font-bold mb-2">Test Complete!</h3>
                        <p class="text-slate-600 mb-6">You scored <span id="score-val" class="font-bold text-2xl text-indigo-600"></span> out of <span id="score-total"></span></p>
                        <div class="flex justify-center space-x-4">
                            <button onclick="renderView('module-detail', ${id}); closeModal()" class="px-4 py-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50">Review Unit</button>
                            <button onclick="renderView('modules'); closeModal()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Next Module</button>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        // INTERACTION LOGIC

        // For Multiple Choice Practice
        window.selectOption = function(btn, isCorrect) {
            // Reset siblings
            const parent = btn.parentElement;
            const buttons = parent.querySelectorAll('button');
            buttons.forEach(b => {
                b.classList.remove('correct-answer', 'wrong-answer');
                b.disabled = true; // Disable after selection
            });

            if (isCorrect) {
                btn.classList.add('correct-answer');
                btn.innerHTML += ' <i class="fas fa-check ml-2"></i>';
            } else {
                btn.classList.add('wrong-answer');
                btn.innerHTML += ' <i class="fas fa-times ml-2"></i>';
                // Highlight correct one
                // In a real app we'd pass the index, but here we just show feedback
            }
        };

        // For Gap Fill
        window.checkGapFill = function(btn) {
            const container = btn.parentElement;
            const inputs = container.querySelectorAll('input');
            let allCorrect = true;

            inputs.forEach(input => {
                const userAns = input.value.trim().toLowerCase();
                const correctAns = input.dataset.ans.toLowerCase();
                const icon = input.nextElementSibling.nextElementSibling; // span.feedback-icon

                icon.classList.remove('hidden');
                if (userAns === correctAns) {
                    input.classList.add('border-green-500', 'text-green-600');
                    input.classList.remove('border-red-500', 'text-red-600');
                    icon.innerHTML = '<i class="fas fa-check text-green-500"></i>';
                } else {
                    input.classList.add('border-red-500', 'text-red-600');
                    input.classList.remove('border-green-500', 'text-green-600');
                    icon.innerHTML = `<i class="fas fa-times text-red-500"></i> <span class="text-xs text-red-500 ml-1">${correctAns}</span>`;
                    allCorrect = false;
                }
            });

            if (allCorrect) {
                btn.textContent = "Great Job!";
                btn.className = "mt-4 text-sm bg-green-600 text-white px-4 py-2 rounded";
            } else {
                btn.textContent = "Try Again / See Corrections";
            }
        };

        // For Test Submission
        window.submitTest = function() {
            const questions = document.querySelectorAll('.test-question');
            let score = 0;
            let total = questions.length;

            questions.forEach((qDiv, idx) => {
                const correctIdx = parseInt(qDiv.dataset.correct);
                const selected = qDiv.querySelector(`input[name="q${idx}"]:checked`);
                
                // Visual feedback on the form
                const labels = qDiv.querySelectorAll('label');
                
                if (selected) {
                    if (parseInt(selected.value) === correctIdx) {
                        score++;
                        selected.parentElement.classList.add('bg-green-100', 'border-green-500');
                    } else {
                        selected.parentElement.classList.add('bg-red-100', 'border-red-500');
                        labels[correctIdx].classList.add('bg-green-100', 'border-green-500'); // Show correct answer
                    }
                } else {
                    // No answer selected
                    labels[correctIdx].classList.add('bg-green-100', 'border-green-500');
                }
            });

            // Show Modal
            const modal = document.getElementById('result-modal');
            const content = document.getElementById('result-content');
            const icon = document.getElementById('score-icon');
            
            document.getElementById('score-val').innerText = score;
            document.getElementById('score-total').innerText = total;

            if (score === total) {
                icon.innerHTML = 'ð';
                icon.className = "text-6xl mb-4 animate-bounce";
            } else if (score > total / 2) {
                icon.innerHTML = 'ð';
            } else {
                icon.innerHTML = 'ð';
            }

            modal.classList.remove('hidden');
            setTimeout(() => {
                content.classList.remove('scale-90', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        };

        window.closeModal = function() {
            document.getElementById('result-modal').classList.add('hidden');
        };

    </script>
</body>
</html>
